# 用户注册功能说明

## 功能概述

用户注册功能已经实现，支持以下特性：

### 1. 注册方式
- **主要注册方式**: 邮箱注册（必填）
- **可选字段**: 手机号码（为后续验证码功能预留）

### 2. 必填字段
- 邮箱地址
- 密码（至少6位）
- 确认密码

### 3. 验证规则
- 邮箱格式验证
- 密码长度验证（≥6位）
- 邮箱唯一性验证
- 密码确认验证

### 4. 数据存储
- 注册成功后，用户数据会保存到内存存储和 localStorage
- 生成唯一的用户ID和public_no
- 创建用户认证记录和用户资料记录
- 数据持久化存储在浏览器的 localStorage 中
- 用户详细信息可在注册后通过个人资料页面完善

### 5. 后续扩展
- 预留了邮箱验证码功能接口
- 预留了手机号验证功能接口
- 支持后续添加邮箱验证码注册流程

## 文件结构

```
frontend/
├── app/
│   ├── register/
│   │   └── page.tsx          # 注册页面
│   └── api/auth/register/
│       └── route.ts          # 注册API
├── lib/
│   ├── api/auth.ts           # API接口定义
│   └── mockData.ts           # Mock数据管理
├── messages/
│   ├── zh.json              # 中文翻译
│   ├── en.json              # 英文翻译
│   └── ja.json              # 日文翻译
└── public/mock/
    ├── auth_users.json       # 用户认证数据
    └── users.json           # 用户资料数据
```

## 使用流程

1. 用户访问 `/register` 页面
2. 填写注册表单（手机号可选）
3. 提交表单，前端验证
4. 调用注册API，后端验证
5. 创建用户数据，返回成功响应
6. 保存用户信息到localStorage
7. 跳转到仪表板页面

## 测试

可以通过以下方式测试注册功能：

1. 访问 `/register` 页面进行正常注册
2. 访问 `/test-register` 页面进行API测试
3. 访问 `/test-mock` 页面查看和管理mock数据
4. 检查控制台日志查看mock数据创建过程

## 注意事项

- 当前为mock数据模式，实际生产环境需要连接真实数据库
- 密码验证使用模拟哈希，生产环境需要使用bcrypt等加密库
- 邮箱验证码功能已预留接口，但尚未实现UI
- 手机号验证功能已预留接口，但尚未实现UI
